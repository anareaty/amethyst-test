(()=>{fetch(mastodonProfile+".rss").then(e=>e.text()).then(e=>new window.DOMParser().parseFromString(e,"text/xml")).then(e=>{let p=e.querySelector("channel > title").textContent,m=e.querySelector("channel > link").textContent,u=e.querySelector("channel > image > url").textContent,s=document.getElementById("mastodon-feed"),t=document.createElement("div");t.className="header";let d=document.createElement("img");d.src=u,t.appendChild(d);let c=document.createElement("a");c.href=m,c.textContent=p,t.appendChild(c);let n=document.createElement("a");n.className="follow-button",n.href=m,n.textContent="\u041F\u043E\u0434\u043F\u0438\u0441\u0430\u0442\u044C\u0441\u044F",t.appendChild(n),s.appendChild(t);let C=e.querySelectorAll("item");Array.from(C).slice(0,maxItems).forEach(a=>{let o=document.createElement("div");o.className="status",o.innerHTML=a.querySelector("description").textContent;let l=document.createElement("div");l.className="post-footer";let i=document.createElement("p"),h=new Date(a.querySelector("pubDate").textContent);i.textContent=` ${h.toLocaleDateString()} - ${h.toLocaleTimeString().slice(0,5)}`,l.appendChild(i);let r=document.createElement("a");r.href=a.querySelector("link").textContent,r.textContent="\u041F\u0435\u0440\u0435\u0439\u0442\u0438",l.appendChild(r),o.appendChild(l),s.appendChild(o)})});})();
